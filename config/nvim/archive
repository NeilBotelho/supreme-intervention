"Fzf maps{{{
"
" nmap <leader>o :Files<CR>
" nmap <leader>O :FRg<CR>
" nmap <leader>b :Buffers<CR>
" nnoremap <leader>s :Lines<CR>
" nnoremap <leader>S :Rg <CR>
"}}}

"Scroll maps{{{
"
noremap <leader>e <C-e>
noremap <leader>y <C-y>

"}}}

"Fzf specific functions{{{
"
function! RipgrepFzf(query, fullscreen)
  let command_fmt = 'rg --column --line-number --no-heading --color=always --smart-case -- %s || true'
  let initial_command = printf(command_fmt, shellescape(a:query))
  let reload_command = printf(command_fmt, '{q}')
  let spec = {'options': ['--phony', '--query', a:query, '--bind', 'change:reload:'.reload_command]}
  call fzf#vim#grep(initial_command, 1, fzf#vim#with_preview(spec), a:fullscreen)
endfunction
command! -nargs=* -bang Rg call RipgrepFzf(<q-args>, <bang>0)


function! FzfFromRg(query, fullscreen)
  let command_fmt = 'rg --files|sed "s/$/:0/"'
  let initial_command = printf(command_fmt)
  let reload_command = printf(command_fmt)
  let spec = {'options': ['--query', a:query, '--bind', 'change:reload:'.reload_command]}
  call fzf#vim#grep(initial_command, 1, fzf#vim#with_preview(spec), a:fullscreen)
endfunction
command! -nargs=* -bang FRg call FzfFromRg(<q-args>, <bang>0)

"}}}

